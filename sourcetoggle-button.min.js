!function(e,r,t){var n=r.Deferred(),i=r.Deferred(),o=['<div class="source-toggle rButton" title="Change Media">','<span class="ui-icon ui-icon-video"></span>',"</div>"].join("");e.bindHelper("Kaltura_CheckConfig",function(e,r,t){if(!r.isPluginEnabled("sourceToggle")){return t()}r.bindHelper("widgetLoaded",function(){i.resolve(r)});r.bindHelper("onplay",function(){n.resolve()});t()});i.done(function(e){var r=e.getInterface(),t=new a(e),i=r.find(".play_head");r.find(".control-bar .kaltura-icon").closest(".rButton").after(o);i.css("right",parseInt(i.css("right"))+r.find(".source-toggle").on("click",function(){if(n.isResolved()){n=t.toggle(e.evaluate("{video.player.currentTime}"))}}).outerWidth(true))});function a(e){var r=this,t,n;r.player=e;r.current=0;t=e.evaluate("{mediaProxy.entry}");r.sources=[t.id];try{n=JSON.parse(t.partnerData);r.sources=r.sources.concat(n.sources||[])}catch(i){}}a.prototype={toggle:function(e){var t=this,n=(t.current+1)%t.sources.length;if(t.current==n){return}t.player.sendNotification("changeMedia",{entryId:t.sources[n]});t.player.setKDPAttribute("mediaProxy","mediaPlayFrom",e);t.current=n;return r.Deferred()}}}(mw,jQuery,window);